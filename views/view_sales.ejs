<%- include('header') %>
    <!-- partial:partials/_navbar -->
    
    <%- include('navbar') %>
    
    
    
    <!-- partial -->
    <div class="container-fluid page-body-wrapper">
      <!-- partial:partials/_sidebar -->
      <% if(role="Admin") { %>
        <%- include('Admin_sidebar') %>
        <% } else { %>
          <%- include('sidebar') %>
          <% } %>
      <!-- partial -->
      <div class="main-panel">
        <div class="content-wrapper">
          <div class="row">
            <div class="col-md-12 grid-margin stretch-card">
              <div class="card">
                <div class="card-body">
                  <h4 class="card-title">View Sales Details</h4>
                  <p class="card-description">
                    <% if(message.length > 0) { %>
                      <%= message %>
          <% } %></h6>
                  </p>
                  <form class="forms" method="POST" action="view_sales">

                    <div class="form-group row">
                      <div class="col-md-6 row">
                        <label for="supplierId" class="col-sm-3 col-form-label">Sales Id:</label>
                        <div class="col-sm-9">
                          <input type="text" maxlength="10" class="form-control" name="salesId" id="salesId" placeholder="sales Id">
                        </div>
                      </div>
                      <div class="col-md-6 row"> 
                        <div class="col-sm-12">
                        <button type="submit" class="col-sm-5  btn btn-sm btn-primary mr-2">View Sales Details</button>
                     <!--  <a href="sales_invoice"> <button type="submit" class="col-sm-5  btn btn-sm btn-primary mr-2">View Invoice</button> </a> -->
                        </div>  
                      </div>
                      <div class="col-md-6 row">
                        <label for="date" class="col-sm-3 col-form-label">Date:</label>
                        <div class="col-sm-9">
                          <label class="form-control" name="salesDate" id="date" placeholder="Date of Registration">
                            <% if(sales !== null) { %>
                              <%= sales.SalesDate %>
                  <% } %>
                              </label>
                        </div>
                      </div>
                      <div class="col-md-6 row">
                        <label for="productCategory" class="col-sm-3 col-form-label">Customer Id</label>
                        <div class="col-sm-9">
                            <div class="form-group">
                          <label name="customerId" class="form-control" id="customerId">
                            <% if(sales !== null) { %>
                              <%= sales.ClientId %>
                  <% } %>
                          </label>
                              </div>
                      </div>
                      </div>
                      <div class="col-md-6 row">
                        <label for="invoiceNo" class="col-sm-3 col-form-label">Invoice No</label>
                        <div class="col-sm-9">
                          <label name="invoiceNo" class="form-control" id="invoiceNo" placeholder="Invoices">
                            <% if(sales !== null) { %>
                              <%= sales.InvoiceNo %>
                  <% } %>
                              </label>
                        </div>
                      </div>
            <!--          <div class="col-md-6 row">
                        <label for="item" class="col-sm-3 col-form-label">Sales Item</label>
                        <div class="col-sm-9">
                            <div class="form-group">
                          <label name="item" class="form-control" id="item">
                           
                          </label>
                              </div>
                      </div>
                      </div>
                      <div class="col-md-6 row">
                        <label for="itemCost" class="col-sm-3 col-form-label">Item Cost</label>
                        <div class="col-sm-9">
                            <div class="form-group">
                                <div class="input-group">
                                  <div class="input-group-prepend">
                                    <span class="input-group-text bg-primary text-white">$</span>
                                  </div>
                                  <input type="number" name="itemCost" id="itemCost" class="form-control" aria-label="Amount (to the nearest dollar)">
                                  <div class="input-group-append">
                                    <span class="input-group-text">.00</span>
                                  </div>
                                </div>
                              </div>
                      </div>
                      </div>
                      <div class="col-md-6 row">
                        <label for="Qty" class="col-sm-3 col-form-label">Quantity</label>
                        <div class="col-sm-9">
                            <div class="form-group">
                                <div class="input-group">
                                 
                                  <label name="Quantity" type="number" id="qty" class="form-control" aria-label="Quantity">
                                      </label>
                                  <div class="input-group-append">
                                    <span class="input-group-text">units</span>
                                  </div>
                                </div>
                              </div>
                      </div>
                      </div>
                      <div class="col-md-6 row">
                        <label for="QtyXCost" class="col-sm-3 col-form-label">Qty * Cost</label>
                        <div class="col-sm-9">
                            <div class="form-group">
                                <div class="input-group">
                                   <div class="input-group-append">
                                    <span class="input-group-text">$</span>
                                  </div>
                                  <label id="QtyXCost" readonly class="form-control" name="qtyxcost" aria-label="QtyXCost">
                                      
                                </label>
                                </div>
                              </div>
                      </div>
                      </div>
                      <div class="col-md-6 row">
                        <label for="unitDiscount" class="col-sm-3 col-form-label">Discount</label>
                        <div class="col-sm-9">
                            <div class="form-group">
                                <div class="input-group">
                                 
                                  <label name="unitDiscount" type="number" id="unitDiscount" class="form-control" aria-label="unitDiscount">
                                      </label>
                                  <div class="input-group-append">
                                    <span class="input-group-text">%</span>
                                  </div>
                                </div>
                              </div>
                      </div>
                      </div>
                      <div class="col-md-6 row">
                        <label for="unitVAT" class="col-sm-3 col-form-label">VAT</label>
                        <div class="col-sm-9">
                            <div class="form-group">
                                <div class="input-group">
                                 
                                  <label name="unitVAT" type="number" id="unitVat" class="form-control" aria-label="unitVAT">
                                      </label>
                                  <div class="input-group-append">
                                    <span class="input-group-text">%</span>
                                  </div>
                                </div>
                              </div>
                      </div>
                      </div>
               
                    -->
                     
                       
                        <div class="form-group col-md-12">
                          <div class="row">
                            <div class="col-md-12 stretch-card">
                              <div class="card">
                                <div class="card-body">
                                  <p class="card-title">Sales Item Details</p>
                                  <div class="table-responsive">
                                    <table name="salesItemDetails" id="salesItemDetails" class="table table-dark table-hover   table-striped">
                                      <% 
                                      var formatter = new Intl.NumberFormat(undefined, {
                                        style: 'currency',
                                        currency: 'NGN',
                                      });
                                      
                                      
                                      %>
                                      <thead>
                                        <th>#</th>
                                        <th class="text-left">Prod Id</th>
                                        <th class="text-left">Product Name</th>
                                        <th class="text-right">Unit Cost</th>
                                        <th class="text-right">Qty</th>
                                        <th class="text-right">Total Cost</th>
                                        <th class="text-right">% VAT</th>
                                        <th class="text-right">Total VAT</th>
                                        <th class="text-right">% Discount</th>
                                        <th class="text-right">Total Discount</th>
                                                                             
                                     
                                    </thead>
                                    <tbody>
                                      <% if(sales !== null) { %>
                                      
                                      <% item = sales.SalesItemsDetails.split(";")%>
                                      <% for(i =0; i < (item.length)-1; i++){%> 
                                        <% itemize = item[i].split(','); %>
                                        <tr>
                                          <td class="unit sn"> <%= i+1 %></td>
                                 
                                          <td class="qty id"> <%= itemize[0] %></td>
                                          <td class="unit desc"><%= itemize[1] %></td>
                                          <td class="qty cost"> <%= formatter.format(itemize[2]) %></td>
                                          <td class="unit qty"> <%= itemize[5] %></td>
                                          <td class="total tcost"> <%= formatter.format(itemize[6]) %></td>
                                          <td class="qty vat" > <%= itemize[3] %></td>
                                          <td class="total tVat"> <%= formatter.format(itemize[8]) %></td>
                                          <td class="unit dis"><%= itemize[4] %></td>                               
                                          <td class="total tdisc"><%= formatter.format(itemize[7]) %></td>
                                         
                                          
                                        </tr>
                                    <% }} %>
                                    
                                    </tbody>
                                    </table>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                      </div>
 <div class="col-md-12 row">
  <div class="col-md-4 row">
    <label for="totalSales" class="col-sm-3 col-form-label">Total Sales</label>
    <div class="col-sm-9">
        <div class="form-group">
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text bg-primary text-white">$</span>
            </div>
            <label name="totalSales" readonly type="number" id="totalSales" class="form-control" aria-label="Amount (to the nearest dollar)">
              <% if(sales !== null) { %>
                <%= sales.SalesAmount %>
    <% } %>
              </label>
          </div>
          </div>
  </div>
  </div>
  <div class="col-md-4 row">
    <label for="totalVAT" class="col-sm-3 col-form-label">Total VAT</label>
    <div class="col-sm-9">
        <div class="form-group">
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text bg-primary text-white">$</span>
            </div>
            <label name="totalVAT"  readonly type="number" id="totalVAT" class="form-control" aria-label="totalVAT">
              <% if(sales !== null) { %>
                <%= sales.TotalVAT %>
    <% } %>
              </label>
          </div>
          </div>
  </div>
  </div>
  <div class="col-md-4 row">
    <label for="totalDiscount" class="col-sm-3 col-form-label">Total Discount</label>
    <div class="col-sm-9">
        <div class="form-group">
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text bg-primary text-white">$</span>
            </div>
            <label name="totalDiscount" readonly type="number" id="totalDiscount" class="form-control" aria-label="totalDiscount">
              <% if(sales !== null) { %>
                <%= sales.SalesDiscount %>
    <% } %>
            </label>
          </div>
          </div>
  </div>
  </div>
  <div class="col-md-4 row">
    <label for="amountDue" class="col-sm-3 col-form-label">Amount Due</label>
    <div class="col-sm-9">
        <div class="form-group">
            <div class="input-group">
              <div class="input-group-prepend">
                <span class="input-group-text bg-primary text-white">$</span>
              </div>
              <label name="amountDue" readonly type="number" id="amountDue" class="form-control" aria-label="amountDue">
                <% if(sales !== null) { %>
                  <%= sales.AmountDue %>
      <% } %>
              </label>
            </div>
          </div>
  </div>
 <!--<input type="submit" value="Submit Record" class="btn btn-primary mr-2">
                    <input type="reset" value="Cancel Entry" class="btn btn-google"> --> 
  </div>
                    
                     
                    
                     

                 

                    
                  </form>
             
              </div>
            </div>

          </div>
        </div>
        </div>
        <!-- content-wrapper ends -->
        <!-- partial:partials/_footer -->
        <%- include('footer') %>
        <!-- partial -->
      </div>
      <!-- main-panel ends -->
    </div>
    <!-- page-body-wrapper ends -->
  </div>
  <!-- container-scroller -->
  <!-- plugins:js -->
  <script src="vendors/base/vendor.bundle.base.js"></script>
  <!-- endinject -->
  <!-- Plugin js for this page-->
  <!-- End plugin js for this page-->
  <!-- inject:js -->
  <script src="js/off-canvas.js"></script>
  <script src="js/hoverable-collapse.js"></script>
  <script src="js/template.js"></script>
  <script src="js/sales.js"></script>
  <!-- endinject -->
  <!-- Custom js for this page-->
  <!-- End custom js for this page-->
</body>

</html>